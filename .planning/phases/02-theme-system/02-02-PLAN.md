---
phase: 02-theme-system
plan: 02
type: execute
domain: ui-design
---

<objective>
Create theme toggle component with smooth animations and polish.

Purpose: Build an elegant, accessible theme toggle button with icon transitions and visual feedback.
Output: Production-ready theme toggle component with smooth animations, ready for integration into navigation.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-setup/01-01-SUMMARY.md
@.planning/phases/01-foundation-setup/01-02-SUMMARY.md
@.planning/phases/01-foundation-setup/01-03-SUMMARY.md
@.planning/phases/02-theme-system/02-01-SUMMARY.md
@src/components/theme-provider.tsx
@src/main.tsx
@tailwind.config.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build theme toggle button with icon</name>
  <files>src/components/theme-toggle.tsx, src/lib/icons.tsx</files>
  <action>
Create a polished theme toggle component with sun/moon icons and proper accessibility.

First, create src/lib/icons.tsx with Lucide React icons:
```tsx
import { Moon, Sun } from 'lucide-react';

export { Moon, Sun };
```

If lucide-react is not installed:
Run: npm install lucide-react

Then create src/components/theme-toggle.tsx:
```tsx
import { Moon, Sun } from 'lucide-react';
import { useTheme } from 'next-themes';
import { Button } from '@/components/ui/button';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu';

export function ThemeToggle() {
  const { setTheme, theme } = useTheme();

  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <Button variant="ghost" size="icon" aria-label="Toggle theme">
          <Sun className="h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0" />
          <Moon className="absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100" />
          <span className="sr-only">Toggle theme</span>
        </Button>
      </DropdownMenuTrigger>
      <DropdownMenuContent align="end">
        <DropdownMenuItem onClick={() => setTheme('light')}>
          Light
        </DropdownMenuItem>
        <DropdownMenuItem onClick={() => setTheme('dark')}>
          Dark
        </DropdownMenuItem>
        <DropdownMenuItem onClick={() => setTheme('system')}>
          System
        </DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  );
}
```

Install dropdown menu component if needed:
Run: npx shadcn@latest add dropdown-menu

The component features:
- Sun/moon icons that crossfade on theme change
- Dropdown menu for explicit theme selection
- Proper aria-label for accessibility
- Smooth icon rotation and scaling transitions
- Integration with shadcn/ui Button and DropdownMenu components
  </action>
  <verify>
- src/components/theme-toggle.tsx exists
- src/lib/icons.tsx exists or lucide-react installed
- DropdownMenu component installed in src/components/ui/
- npm run build completes without errors
- No TypeScript errors
  </verify>
  <done>
Theme toggle component created with icons and dropdown menu
  </done>
</task>

<task type="auto">
  <name>Task 2: Add smooth transitions and animations</name>
  <files>src/index.css, src/App.tsx</files>
  <action>
Enhance theme switching with smooth CSS transitions and add theme toggle to test layout.

Update src/index.css to add smooth theme transitions:
Add after @tailwind directives:
```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply transition-colors duration-300;
  }
}
```

This adds 300ms color transitions to all elements when theme changes.

Update src/App.tsx to test the theme toggle:
```tsx
import { ThemeToggle } from '@/components/theme-toggle';

function App() {
  return (
    <div className="min-h-screen bg-background text-foreground">
      <header className="border-b">
        <div className="container mx-auto px-4 py-4 flex justify-between items-center">
          <h1 className="text-2xl font-bold">Portfolio</h1>
          <ThemeToggle />
        </div>
      </header>
      <main className="container mx-auto px-4 py-8">
        <div className="max-w-4xl mx-auto space-y-6">
          <div className="rounded-lg border bg-card p-6">
            <h2 className="text-2xl font-semibold mb-2">Theme System</h2>
            <p className="text-muted-foreground">
              Light/dark mode is working! Use the toggle in the header to switch themes.
            </p>
          </div>
          <div className="grid gap-4 md:grid-cols-2">
            <div className="rounded-lg border bg-card p-6">
              <h3 className="font-semibold mb-2">Smooth Transitions</h3>
              <p className="text-sm text-muted-foreground">
                Theme changes animate smoothly over 300ms for all colors and backgrounds.
              </p>
            </div>
            <div className="rounded-lg border bg-card p-6">
              <h3 className="font-semibold mb-2">Persistent Preference</h3>
              <p className="text-sm text-muted-foreground">
                Your theme choice is saved and persists across page refreshes.
              </p>
            </div>
          </div>
        </div>
      </main>
    </div>
  );
}

export default App;
```

This creates a complete test layout showing:
- Theme toggle in header
- Cards with proper theme-aware colors
- Smooth color transitions
- Responsive grid layout
  </action>
  <verify>
- src/index.css has transition-colors utility
- src/App.tsx includes ThemeToggle in header
- Theme changes trigger smooth 300ms transitions
- All elements (backgrounds, text, borders) animate smoothly
- Layout is responsive (grid collapses to single column on mobile)
  </verify>
  <done>
Smooth transitions implemented and theme toggle integrated into test layout
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Theme toggle component with smooth animations integrated into test layout. Features:
- Dropdown menu with Light/Dark/System options
- Sun/moon icon crossfade animation
- 300ms smooth color transitions on all elements
- Responsive layout with cards
- Theme persistence across refreshes
  </what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:5173
    3. Verify theme toggle in header:
       - Click toggle button to open dropdown
       - Select "Light" - verify light theme applies with smooth transition
       - Select "Dark" - verify dark theme applies with smooth transition
       - Select "System" - verify it matches your OS theme
    4. Verify transitions:
       - All colors animate smoothly (no harsh flashes)
       - Background, text, borders, cards all transition
       - Icon crossfade animation works
    5. Test persistence:
       - Set theme to Dark
       - Refresh page (Cmd+R / F5)
       - Verify dark theme persists
    6. Test mobile:
       - Resize browser to mobile width (< 768px)
       - Verify layout collapses to single column
       - Verify theme toggle still works
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Theme toggle component fully functional
- [ ] Smooth 300ms transitions working
- [ ] Dropdown menu with all three options
- [ ] Icon animations (sun/moon crossfade)
- [ ] Theme persistence confirmed
- [ ] Responsive layout working
- [ ] No console errors
</verification>

<success_criteria>
- All tasks completed
- Theme toggle production-ready
- Animations smooth and polished
- Component accessible (aria-labels, keyboard navigation)
- **Phase 2 complete** - ready for Phase 3 (Layout Structure)
</success_criteria>

<output>
After completion, create `.planning/phases/02-theme-system/02-02-SUMMARY.md`:

# Phase 2 Plan 2: Create Theme Toggle Component Summary

**Production-ready theme toggle component with smooth animations, dropdown menu, and integrated test layout**

## Accomplishments
- Theme toggle component with sun/moon icons
- Smooth 300ms color transitions
- Dropdown menu for explicit theme selection
- Icon crossfade animations
- Complete test layout demonstrating theme system
- Responsive design verified

## Files Created/Modified
- `src/components/theme-toggle.tsx` - Theme toggle component
- `src/lib/icons.tsx` - Icon exports (or lucide-react)
- `src/components/ui/dropdown-menu.tsx` - Dropdown component
- `src/index.css` - Added transition utilities
- `src/App.tsx` - Test layout with header, cards, grid
- `package.json` - Added lucide-react

## Decisions Made
- Dropdown menu instead of simple toggle (more explicit control)
- Lucide React for icons (lightweight, consistent with shadcn)
- 300ms transition duration (smooth but not sluggish)
- transition-colors utility (affects colors, not layout)
- Class-based toggle placement in header (standard UX pattern)

## Deviations from Plan
None - plan executed as specified.

## Issues Encountered
None

## Next Step
**Phase 2 complete** - ready for Phase 3 (Layout Structure)
</output>
